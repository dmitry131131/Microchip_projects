1. Настройка аналогового компаратора

Аналоговый компаратор сравнивает напряжение на положительном входе (AIN0, PB0) с напряжением на отрицательном входе (AIN1, PB1). Результат сравнения доступен в регистре состояния.
2. Регистры, связанные с аналоговым компаратором

ACSR (Analog Comparator Control and Status Register):

    + ACD (Bit 7): Отключает аналоговый компаратор для экономии энергии.

    + ACBG (Bit 6): Подключает внутренний источник опорного напряжения (1.1V) к положительному входу (AIN0).

    + ACO (Bit 5): Флаг результата сравнения (1 если AIN0 > AIN1, 0 если AIN0 < AIN1).

    + ACI (Bit 4): Флаг прерывания компаратора (устанавливается при срабатывании прерывания).

    + ACIE (Bit 3): Разрешает прерывание от компаратора.

    + ACIC (Bit 2): Разрешает использование компаратора для захвата по входу таймера/счетчика.

    + ACIS1, ACIS0 (Bits 1, 0): Выбор режима прерывания:

        + 00: Прерывание при изменении состояния выхода компаратора.

        + 01: Прерывание при падающем фронте.

        + 10: Прерывание при возрастающем фронте.

        + 11: Прерывание при любом изменении.